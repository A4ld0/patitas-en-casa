<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Alarmas – Patitas en Casa</title>

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
    crossorigin="anonymous"
  />

  <!-- FontAwesome (para íconos) -->
  <link
    href="https://use.fontawesome.com/releases/v5.1.1/css/all.css"
    rel="stylesheet"
    integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ"
    crossorigin="anonymous"
  />

  <style>
   .bg-brown {
      background-color: #ba8445 !important;
    }
    /* Texto claro sobre fondo café */
    .navbar-dark .navbar-brand,
    .navbar-dark .nav-link {
      color: #f3e3d0;
    }
    .navbar-dark .nav-link.active,
    .navbar-dark .nav-link:hover {
      color: #fff;
    }

    /* Botones y badge (sólo un recordatorio) */
    .btn-delifesti {
      background-color: #502b02;
      color: #fff;
      border: none;
    }
    .btn-delifesti:hover {
      background-color: #502b02;
    }
    .notification-badge {
      position: absolute;
      top: 0;
      right: 0;
      transform: translate(50%, -50%);
      background-color: #ff3366;
      color: #fff;
      border-radius: 50%;
      padding: 0.25rem 0.5rem;
      font-size: 0.75rem;
    }
  </style>
</head>
<body>

  <!-- ======= HEADER / NAVBAR ======= -->
  <header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-brown">
      <div class="container-fluid">
        <a class="navbar-brand" href="home.html">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSDS2L1lcq2WKlLfrvJB-fhIGMD3P2fyFkFXQ&s"
               alt="Patitas en Casa" style="height:40px">
          Patitas en Casa
        </a>
        <button class="navbar-toggler" type="button"
                data-bs-toggle="collapse" data-bs-target="#navCollapse">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="d-flex align-items-center position-relative">
            <button class="btn btn-delifesti me-3"
                    data-bs-toggle="modal"
                    data-bs-target="#loginModal">
              <i class="fas fa-user"></i> Cuenta
            </button>
            <button class="btn btn-delifesti position-relative">
              <i class="fas fa-bell"></i>
              <span class="notification-badge" id="badge-count">0</span>
            </button>
          </div>
        </div>
      </div>
    </nav>
  </header>


  <!-- ======= MAIN ======= -->
  <main class="container my-5">
    <h2 class="text-center mb-4">Alarmas</h2>
    <div class="row gy-4">
      
      <!-- Crear Alarma -->
      <div class="col-lg-6">
        <div class="p-4 bg-brown text-white rounded">
          <h4>Crear Alarma</h4>
          <form id="alarmForm">
            <div class="row">
              <div class="col-md-6 mb-2">
                <input type="text" class="form-control" id="raza" placeholder="Raza" required>
              </div>
              <div class="col-md-6 mb-2">
                <input type="text" class="form-control" id="tipo" placeholder="Tipo" required>
              </div>
              <div class="col-md-6 mb-2">
                <input type="text" class="form-control" id="color" placeholder="Color">
              </div>
              <div class="col-md-6 mb-2">
                <input type="text" class="form-control" id="ciudad" placeholder="Ciudad">
              </div>
              <div class="col-md-6 mb-2">
                <input type="number" class="form-control" id="edad" placeholder="Edad">
              </div>
              <div class="col-md-6 mb-2">
                <select class="form-select" id="sexo">
                  <option value="" selected>Sexo</option>
                  <option value="Macho">Macho</option>
                  <option value="Hembra">Hembra</option>
                </select>
              </div>
            </div>
            <button type="submit" class="btn btn-light mt-2">Crear</button>
          </form>
        </div>
      </div>

      <!-- Alarmas actuales -->
      <div class="col-lg-6">
        <h5>Alarmas actuales</h5>
        <div id="alarmsList" class="list-group"></div>
      </div>
    </div>
  </main>


  <!-- ======= LOGIN MODAL ======= -->
  <div class="modal fade" id="loginModal" tabindex="-1"
       aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        
        <div class="modal-header">
          <h5 class="modal-title" id="loginModalLabel">Iniciar Sesión</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"
                  aria-label="Cerrar"></button>
        </div>
        
        <div class="modal-body">
          <form id="loginForm">
            <div class="mb-3">
              <label for="email" class="form-label">Correo Electrónico</label>
              <input type="email" class="form-control" id="email"
                     placeholder="usuario@correo.com" required>
            </div>
            <div class="mb-3">
              <label for="password" class="form-label">Contraseña</label>
              <input type="password" class="form-control" id="password"
                     placeholder="Contraseña" required>
            </div>
            <button type="submit" class="btn btn-delifesti w-100">Entrar</button>
          </form>
        </div>

      </div>
    </div>
  </div>


  <!-- ======= BOOTSTRAP SCRIPTS ======= -->
  <script
    src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
    integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
    crossorigin="anonymous"
  ></script>

  <!-- ======= LÓGICA DE ALARMAS ======= -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const listEl = document.getElementById('alarmsList');
      const badge  = document.getElementById('badge-count');
      let alarmas = JSON.parse(localStorage.getItem('alarmas') || '[]');
  
      // Si no hay alarmas, sembramos dos de ejemplo
      if (alarmas.length === 0) {
        alarmas = [
          {
            tipo:   'Perro',
            raza:   'Chihuahua',
            color:  'Café',
            ciudad: 'Colima',
            edad:   '2',
            sexo:   'Macho'
          },
          {
            tipo:   'Gato',
            raza:   'Abisinio',
            color:  'Naranja',
            ciudad: 'Zapopan',
            edad:   '4',
            sexo:   'Macho'
          }
        ];
        localStorage.setItem('alarmas', JSON.stringify(alarmas));
      }
  
      // Función que dibuja la lista de alarmas y actualiza el badge
      function render() {
        listEl.innerHTML = '';
        badge.textContent = alarmas.length;
        alarmas.forEach((a, i) => {
          const item = document.createElement('div');
          item.className = 'list-group-item d-flex justify-content-between';
          item.innerHTML = `
            <div>
              <strong>Tipo:</strong> ${a.tipo}<br>
              <strong>Raza:</strong> ${a.raza}<br>
              ${a.edad  ? `<strong>Edad:</strong> ${a.edad}<br>` : ''}
              ${a.sexo  ? `<strong>Sexo:</strong> ${a.sexo}<br>` : ''}
              ${a.color ? `<strong>Color:</strong> ${a.color}<br>` : ''}
              ${a.ciudad? `<strong>Ciudad:</strong> ${a.ciudad}` : ''}
            </div>
            <button class="btn btn-sm btn-outline-danger">Eliminar</button>
          `;
          // Manejador para eliminar esta alarma
          item.querySelector('button').onclick = () => {
            alarmas.splice(i, 1);
            localStorage.setItem('alarmas', JSON.stringify(alarmas));
            render();
          };
          listEl.append(item);
        });
      }
  
      // Render inicial
      render();
  
      // Crear nueva alarma desde el formulario
      document.getElementById('alarmForm').onsubmit = e => {
        e.preventDefault();
        const nueva = {
          tipo:   document.getElementById('tipo').value.trim(),
          raza:   document.getElementById('raza').value.trim(),
          color:  document.getElementById('color').value.trim(),
          ciudad: document.getElementById('ciudad').value.trim(),
          edad:   document.getElementById('edad').value.trim(),
          sexo:   document.getElementById('sexo').value
        };
        alarmas.push(nueva);
        localStorage.setItem('alarmas', JSON.stringify(alarmas));
        e.target.reset();
        render();
      };
    });
  </script>
</body>
</html>
